<Window x:Class="ModusPractica.ProfileSelectorWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Choose Profile and Data Location - Modus Practica"
        Height="720"
        Width="700"
        WindowStartupLocation="CenterScreen"
        ResizeMode="NoResize"
        Background="#F5F5F5">
        <Window.Resources>
                <Style TargetType="Button">
                        <Setter Property="Padding"
                                Value="12,6"/>
                        <Setter Property="Margin"
                                Value="5"/>
                        <Setter Property="FontSize"
                                Value="13"/>
                        <Setter Property="Cursor"
                                Value="Hand"/>
                </Style>
                <Style TargetType="TextBlock">
                        <Setter Property="FontSize"
                                Value="13"/>
                </Style>
                <Style TargetType="Label">
                        <Setter Property="FontSize"
                                Value="13"/>
                        <Setter Property="FontWeight"
                                Value="SemiBold"/>
                </Style>
        </Window.Resources>

        <Grid Margin="20">
                <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="*"/>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                </Grid.RowDefinitions>

                <!-- Header -->
                <StackPanel Grid.Row="0"
                            Margin="0,0,0,20">
                        <TextBlock Text="Welcome to Modus Practica"
                                   FontSize="22"
                                   FontWeight="Bold"
                                   Foreground="#333333"
                                   HorizontalAlignment="Center"/>
                        <TextBlock Text="Choose your profile and where your practice data will be stored"
                                   FontSize="13"
                                   Foreground="#666666"
                                   HorizontalAlignment="Center"
                                   Margin="0,5,0,0"/>
                </StackPanel>

                <!-- Data Location Section -->
                <Border Grid.Row="1"
                        BorderBrush="#CCCCCC"
                        BorderThickness="1"
                        CornerRadius="5"
                        Background="White"
                        Padding="15"
                        Margin="0,0,0,15">
                        <StackPanel>
                                <Label Content="ðŸ“ Data Location"/>
                                <TextBlock Text="Choose where your practice data will be stored (can be changed later)"
                                           Foreground="#666666"
                                           TextWrapping="Wrap"
                                           Margin="0,0,0,10"/>

                                <StackPanel Orientation="Horizontal"
                                            Margin="0,10,0,0">
                                        <TextBox x:Name="TxtCustomPath"
                                                 Width="450"
                                                 Height="30"
                                                 VerticalContentAlignment="Center"
                                                 IsReadOnly="True"
                                                 Margin="0,0,10,0"/>
                                        <Button x:Name="BtnBrowse"
                                                Content="Browse..."
                                                Width="100"
                                                Click="BtnBrowse_Click"/>
                                </StackPanel>

                                <TextBlock x:Name="TxtLocationPreview"
                                           Text="Please select a folder location"
                                           Foreground="#0066CC"
                                           FontSize="11"
                                           FontStyle="Italic"
                                           Margin="0,10,0,0"
                                           TextWrapping="Wrap"/>

                                <!-- Inline warning when no location is selected -->
                                <TextBlock x:Name="TxtLocationWarning"
                                           Text="No location selected. Choose a folder to enable profile creation and start."
                                           Foreground="#D32F2F"
                                           FontSize="12"
                                           Margin="0,6,0,0"
                                           Visibility="Visible"
                                           TextWrapping="Wrap"/>
                        </StackPanel>
                </Border>

                <!-- Profile Selection Section -->
                <Border Grid.Row="2"
                        BorderBrush="#CCCCCC"
                        BorderThickness="1"
                        CornerRadius="5"
                        Background="White"
                        Padding="15">
                        <Grid>
                                <Grid.RowDefinitions>
                                        <RowDefinition Height="Auto"/>
                                        <RowDefinition Height="*"/>
                                        <RowDefinition Height="Auto"/>
                                </Grid.RowDefinitions>

                                <Label Grid.Row="0"
                                       Content="ðŸ‘¤ Select Profile"/>

                                <ListBox x:Name="LbProfiles"
                                         Grid.Row="1"
                                         Margin="0,5,0,10"
                                         SelectionMode="Single"
                                         SelectionChanged="LbProfiles_SelectionChanged">
                                        <ListBox.ItemTemplate>
                                                <DataTemplate>
                                                        <StackPanel Orientation="Horizontal"
                                                                    Margin="5">
                                                                <TextBlock Text="ðŸ‘¤"
                                                                           FontSize="16"
                                                                           Margin="0,0,10,0"/>
                                                                <TextBlock Text="{Binding}"
                                                                           FontSize="14"
                                                                           VerticalAlignment="Center"/>
                                                        </StackPanel>
                                                </DataTemplate>
                                        </ListBox.ItemTemplate>
                                </ListBox>

                                <StackPanel Grid.Row="2"
                                            Orientation="Horizontal"
                                            HorizontalAlignment="Center">
                                        <Button x:Name="BtnOpenProfiles"
                                                Content="ðŸ“‚ Open Profiles..."
                                                Click="BtnOpenProfiles_Click"/>
                                        <Button x:Name="BtnNewProfile"
                                                Content="âž• New Profile"
                                                Click="BtnNewProfile_Click"/>
                                        <Button x:Name="BtnDeleteProfile"
                                                Content="ðŸ—‘ï¸ Delete"
                                                IsEnabled="False"
                                                Click="BtnDeleteProfile_Click"/>
                                </StackPanel>
                        </Grid>
                </Border>

                <!-- Action Buttons -->
                <StackPanel Grid.Row="4"
                            Orientation="Horizontal"
                            HorizontalAlignment="Right"
                            Margin="0,20,0,0">
                        <Button x:Name="BtnOk"
                                Content="âœ“ Start"
                                Width="120"
                                IsEnabled="False"
                                IsDefault="True"
                                FontWeight="Bold"
                                Click="BtnOk_Click">
                                <Button.Style>
                                        <Style TargetType="Button"
                                               BasedOn="{StaticResource {x:Type Button}}">
                                                <!-- Enabled (default) look: pastel blue -->
                                                <Setter Property="Background"
                                                        Value="#BBDEFB"/>
                                                <Setter Property="BorderBrush"
                                                        Value="#1976D2"/>
                                                <Setter Property="Foreground"
                                                        Value="#1976D2"/>
                                                <Setter Property="Opacity"
                                                        Value="1"/>
                                                <Style.Triggers>
                                                        <Trigger Property="IsEnabled"
                                                                 Value="False">
                                                                <Setter Property="Background"
                                                                        Value="#E0E0E0"/>
                                                                <Setter Property="BorderBrush"
                                                                        Value="#BDBDBD"/>
                                                                <Setter Property="Foreground"
                                                                        Value="#9E9E9E"/>
                                                                <Setter Property="Opacity"
                                                                        Value="0.9"/>
                                                                <Setter Property="Cursor"
                                                                        Value="Arrow"/>
                                                        </Trigger>
                                                        <Trigger Property="IsMouseOver"
                                                                 Value="True">
                                                                <Setter Property="Background"
                                                                        Value="#A6D4FA"/>
                                                        </Trigger>
                                                </Style.Triggers>
                                        </Style>
                                </Button.Style>
                        </Button>
                        <Button x:Name="BtnCancel"
                                Content="âœ• Cancel"
                                Width="120"
                                IsCancel="True"
                                Click="BtnCancel_Click"/>
                </StackPanel>
        </Grid>
</Window>

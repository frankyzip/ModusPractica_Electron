<Window
    x:Class="ModusPractica.PracticeStatisticsWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    Title="Practice Statistics"
    Width="1000"
    Height="700"
    Background="#F5F5F5"
    WindowStartupLocation="CenterScreen">

    <Window.Resources>
        <!--  Shadow effect for borders  -->
        <DropShadowEffect
            x:Key="MildShadowEffect"
            BlurRadius="10"
            Direction="270"
            Opacity="0.2"
            ShadowDepth="3"
            Color="#000000" />

        <!--  Chart bar style  -->
        <Style x:Key="ChartBarStyle" TargetType="Rectangle">
            <Setter Property="RadiusX" Value="4" />
            <Setter Property="RadiusY" Value="4" />
            <Setter Property="Fill">
                <Setter.Value>
                    <LinearGradientBrush StartPoint="0,0" EndPoint="0,1">
                        <GradientStop Offset="0" Color="#5E9CD3" />
                        <GradientStop Offset="1" Color="#4A7EBB" />
                    </LinearGradientBrush>
                </Setter.Value>
            </Setter>
        </Style>
    </Window.Resources>

    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto" />
            <RowDefinition Height="Auto" />
            <RowDefinition Height="*" />
            <RowDefinition Height="Auto" />
        </Grid.RowDefinitions>

        <!-- Header with title and controls -->
        <Border
            Grid.Row="0"
            Margin="20,20,20,10"
            Padding="20"
            Background="White"
            BorderBrush="#E0E0E0"
            BorderThickness="1"
            CornerRadius="10"
            Effect="{StaticResource MildShadowEffect}">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*" />
                    <ColumnDefinition Width="Auto" />
                </Grid.ColumnDefinitions>
                <TextBlock
                    Grid.Column="0"
                    VerticalAlignment="Center"
                    FontSize="24"
                    FontWeight="SemiBold"
                    Foreground="#333333"
                    Text="Practice Overview (All Music Pieces)" />
                <StackPanel Grid.Column="1" Orientation="Horizontal">
                    <ComboBox
                        x:Name="CmbPeriodFilter"
                        Width="150"
                        Margin="0,0,10,0"
                        SelectedIndex="0">
                        <ComboBoxItem Content="Current week" />
                        <ComboBoxItem Content="Previous week" />
                        <ComboBoxItem Content="Current month" />
                        <ComboBoxItem Content="Previous month" />
                        <ComboBoxItem Content="Current year" />
                        <ComboBoxItem Content="All years" />
                    </ComboBox>
                    
                    <Button
                        x:Name="BtnExport"
                        Width="100"
                        Click="BtnExport_Click"
                        Content="Export"
                        Style="{StaticResource {x:Static ToolBar.ButtonStyleKey}}" />
                </StackPanel>
            </Grid>
        </Border>

        <!-- Statistical cards -->
        <Border
            Grid.Row="1"
            Margin="20,10,20,10"
            Padding="20"
            Background="White"
            BorderBrush="#E0E0E0"
            BorderThickness="1"
            CornerRadius="10"
            Effect="{StaticResource MildShadowEffect}">
            <UniformGrid Columns="5" Rows="1">
                <!-- Today -->
                <Border Margin="5" Padding="10" Background="#F8F9FA" CornerRadius="8">
                    <StackPanel>
                        <TextBlock
                            HorizontalAlignment="Center"
                            FontSize="12"
                            Foreground="#666666"
                            Text="Today" />
                        <TextBlock
                            x:Name="TxtTodayPracticeTime"
                            Margin="0,5,0,0"
                            HorizontalAlignment="Center"
                            FontSize="20"
                            FontWeight="Bold"
                            Foreground="#4A7EBB"
                            Text="0 min" />
                        <TextBlock
                            HorizontalAlignment="Center"
                            FontSize="12"
                            Foreground="#666666"
                            Text="Practice Time" />
                    </StackPanel>
                </Border>
                <!-- This Week -->
                <Border Margin="5" Padding="10" Background="#F8F9FA" CornerRadius="8">
                    <StackPanel>
                        <TextBlock
                            HorizontalAlignment="Center"
                            FontSize="12"
                            Foreground="#666666"
                            Text="This Week" />
                        <TextBlock
                            x:Name="TxtWeekPracticeTime"
                            Margin="0,5,0,0"
                            HorizontalAlignment="Center"
                            FontSize="20"
                            FontWeight="Bold"
                            Foreground="#4A7EBB"
                            Text="0 min" />
                        <TextBlock
                            HorizontalAlignment="Center"
                            FontSize="12"
                            Foreground="#666666"
                            Text="Practice Time" />
                    </StackPanel>
                </Border>
                <!-- This Month -->
                <Border Margin="5" Padding="10" Background="#F8F9FA" CornerRadius="8">
                    <StackPanel>
                        <TextBlock
                            HorizontalAlignment="Center"
                            FontSize="12"
                            Foreground="#666666"
                            Text="This Month" />
                        <TextBlock
                            x:Name="TxtMonthPracticeTime"
                            Margin="0,5,0,0"
                            HorizontalAlignment="Center"
                            FontSize="20"
                            FontWeight="Bold"
                            Foreground="#4A7EBB"
                            Text="0 min" />
                        <TextBlock
                            HorizontalAlignment="Center"
                            FontSize="12"
                            Foreground="#666666"
                            Text="Practice Time" />
                    </StackPanel>
                </Border>
                <!-- This Year -->
                <Border Margin="5" Padding="10" Background="#F8F9FA" CornerRadius="8">
                    <StackPanel>
                        <TextBlock
                            HorizontalAlignment="Center"
                            FontSize="12"
                            Foreground="#666666"
                            Text="This Year" />
                        <TextBlock
                            x:Name="TxtYearPracticeTime"
                            Margin="0,5,0,0"
                            HorizontalAlignment="Center"
                            FontSize="20"
                            FontWeight="Bold"
                            Foreground="#4A7EBB"
                            Text="0 min" />
                        <TextBlock
                            HorizontalAlignment="Center"
                            FontSize="12"
                            Foreground="#666666"
                            Text="Practice Time" />
                    </StackPanel>
                </Border>
                <!-- Total -->
                <Border Margin="5" Padding="10" Background="#FFE6F0FF" CornerRadius="8">
                    <StackPanel>
                        <TextBlock
                            HorizontalAlignment="Center"
                            FontSize="12"
                            Foreground="#666666"
                            Text="Total" />
                        <TextBlock
                            x:Name="TxtTotalPracticeTime"
                            Margin="0,5,0,0"
                            HorizontalAlignment="Center"
                            FontSize="20"
                            FontWeight="Bold"
                            Foreground="#4A7EBB"
                            Text="0 min" />
                        <TextBlock
                            HorizontalAlignment="Center"
                            FontSize="12"
                            Foreground="#666666"
                            Text="Practice Time" />
                    </StackPanel>
                </Border>
            </UniformGrid>
        </Border>

        <!-- Chart Container -->
        <TabControl
            x:Name="TabCharts"
            Grid.Row="2"
            Margin="20,10,20,10"
            Background="Transparent"
            BorderThickness="0"
            SelectionChanged="TabCharts_SelectionChanged">
            <TabItem Header="Practice Time by Period">
                <Border
                    Padding="20"
                    Background="White"
                    BorderBrush="#E0E0E0"
                    BorderThickness="1"
                    CornerRadius="0,0,10,10"
                    Effect="{StaticResource MildShadowEffect}">
                    <Grid>
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto" />
                            <RowDefinition Height="*" />
                        </Grid.RowDefinitions>
                        <TextBlock
                            Grid.Row="0"
                            Margin="0,0,0,10"
                            FontSize="16"
                            FontWeight="SemiBold"
                            Foreground="#333333"
                            Text="Practice time per selected period" />
                        <Canvas
                            x:Name="CnvPracticeTimeChart"
                            Grid.Row="1"
                            Background="#F9F9F9" />
                    </Grid>
                </Border>
            </TabItem>
            <TabItem Header="Practice Time per Piece this week">
                <Border
                    Padding="20"
                    Background="White"
                    BorderBrush="#E0E0E0"
                    BorderThickness="1"
                    CornerRadius="0,0,10,10"
                    Effect="{StaticResource MildShadowEffect}">
                    <Grid>
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto" />
                            <RowDefinition Height="*" />
                        </Grid.RowDefinitions>
                        <TextBlock
                            Grid.Row="0"
                            Margin="0,0,0,10"
                            FontSize="16"
                            FontWeight="SemiBold"
                            Foreground="#333333"
                            Text="Practice time per piece this week" />
                        <Canvas
                            x:Name="CnvDaysChart"
                            Grid.Row="1"
                            Background="#F9F9F9" />
                    </Grid>
                </Border>
            </TabItem>
            <TabItem Header="Practice Time per Piece this month">
                <Border
                    Padding="20"
                    Background="White"
                    BorderBrush="#E0E0E0"
                    BorderThickness="1"
                    CornerRadius="0,0,10,10"
                    Effect="{StaticResource MildShadowEffect}">
                    <Grid>
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto" />
                            <RowDefinition Height="*" />
                        </Grid.RowDefinitions>
                        <TextBlock
                            Grid.Row="0"
                            Margin="0,0,0,10"
                            FontSize="16"
                            FontWeight="SemiBold"
                            Foreground="#333333"
                            Text="Practice time per piece this month" />
                        <Canvas
                            x:Name="CnvMonthPiecesChart"
                            Grid.Row="1"
                            Background="#F9F9F9" />
                    </Grid>
                </Border>
            </TabItem>
        </TabControl>

        <!-- Footer with buttons -->
        <Border
            Grid.Row="3"
            Margin="20,10,20,20"
            Padding="15"
            Background="White"
            BorderBrush="#E0E0E0"
            BorderThickness="1"
            CornerRadius="10"
            Effect="{StaticResource MildShadowEffect}">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*" />
                    <ColumnDefinition Width="Auto" />
                </Grid.ColumnDefinitions>
                <StackPanel
                    Grid.Column="0"
                    VerticalAlignment="Center"
                    Orientation="Horizontal">
                    <TextBlock
                        x:Name="TxtStatusInfo"
                        Foreground="#666666"
                        Text="Based on historical practice times of all music pieces" />
                </StackPanel>
                <Button
                    Grid.Column="1"
                    Width="120"
                    Height="30"
                    Click="BtnClose_Click"
                    Content="Close"
                    Style="{StaticResource {x:Static ToolBar.ButtonStyleKey}}" />
            </Grid>
        </Border>
    </Grid>
</Window>
